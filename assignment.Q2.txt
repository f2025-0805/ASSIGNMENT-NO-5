#include <iostream>
#include <fstream>
#include <vector>
#include <string>

using namespace std;

struct Order {
    int id;
    string name;
    int items;
    double price;
};

int main() {
    vector<Order> orders;
    int num;
    
    cout << "Enter number of orders: ";
    cin >> num;
    
    for(int i = 0; i < num; i++) {
        Order temp;
        cout << "\nOrder " << i+1 << ":\n";
        cout << "ID: ";
        cin >> temp.id;
        cout << "Customer Name: ";
        cin.ignore();
        getline(cin, temp.name);
        
        do {
            cout << "Number of items: ";
            cin >> temp.items;
            if(temp.items <= 0) cout << "Must be positive\n";
        } while(temp.items <= 0);
        
        do {
            cout << "Price per item: ";
            cin >> temp.price;
            if(temp.price <= 0) cout << "Must be positive\n";
        } while(temp.price <= 0);
        
        orders.push_back(temp);
    }
    
    ofstream outFile("priority_orders.txt");
    if(!outFile) {
        cout << "Error creating file\n";
        return 1;
    }
    
    for(const auto& order : orders) {
        double total = order.items * order.price;
        if(total > 5000) {
            outFile << order.id << "\n" 
                    << order.name << "\n" 
                    << order.items << "\n" 
                    << order.price << "\n" 
                    << total << "\n";
        }
    }
    outFile.close();
    
    ifstream inFile("priority_orders.txt");
    if(!inFile) {
        cout << "No priority orders found\n";
        return 1;
    }
    
    cout << "\nPriority Orders:\n";
    while(inFile) {
        Order temp;
        double total;
        
        inFile >> temp.id;
        if(inFile.eof()) break;
        
        inFile.ignore();
        getline(inFile, temp.name);
        inFile >> temp.items >> temp.price >> total;
        
        if(!inFile.fail()) {
            cout << "\nID: " << temp.id << "\n";
            cout << "Name: " << temp.name << "\n";
            cout << "Items: " << temp.items << "\n";
            cout << "Price: " << temp.price << "\n";
            cout << "Total: " << total << "\n";
        }
    }
    
    inFile.close();
    return 0;
}
